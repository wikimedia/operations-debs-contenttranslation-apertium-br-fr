      <!--*************************************** REGLES DE SN ******************************************** -->

    <rule comment="REGLA: NOM NOM NOM">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="nom"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_nom_de_det_nom_de_nom" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><var n="genero"/></tag>
              <tag><var n="numero"/></tag>
            </tags>
            <lu>
              <lit v="le"/>
              <lit-tag v="det.def"/>
              <clip pos="1" side="tl" part="gen_sense_mf"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_nom"/>
              <clip pos="1" side="tl" part="gen_sense_mf"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="le"/>
              <lit-tag v="det.def"/>
              <clip pos="2" side="tl" part="gen_sense_mf"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen_sense_mf"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen_sense_mf"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>

     
    <rule comment="REGLA: NOM NUM A NOM">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="num"/>
        <pattern-item n="a"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
<!--
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
-->
        <call-macro n="f_concord1">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <and>
                <in caseless="yes">
                  <clip pos="1" side="sl" part="lem"/>
                  <list n="dias"/>
                </in>
                <in caseless="yes">
                  <clip pos="4" side="sl" part="lem"/>
                  <list n="meses"/>
                </in>
              </and>
            </test>
            <out>
              <chunk name="nom_num_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="3"/>
	      <with-param pos="4"/>
            </call-macro>
          </when>
          <otherwise>
            <call-macro n="f_concord2">
              <with-param pos="2"/>
              <with-param pos="1"/>
            </call-macro>
            <out>
              <chunk name="nom_num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_nom"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_nom"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
      
   
    <rule comment="REGLA: DET NUM DE NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/> 
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="5" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="det_num_nom_adj" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="4"/>
	      <with-param pos="5"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="det_num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_adj"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="whole"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_nom"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: NUM DE NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_concord1">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <list n="meses"/>
              </in>
            </test>
            <out>
              <chunk name="num_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="f_bcond">
              <with-param pos="2"/>
	      <with-param pos="3"/>
            </call-macro>
          </when>
          <otherwise>
            <out>
              <chunk name="num_prep_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_num"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_nom"/>
                  <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="3" side="tl" part="gen_mf"/>
                  <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="3" side="tl" part="nbr_sp"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: num de cada num nom">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="5"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: num nom de cada num">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: det num de cada num nom">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="6"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_nom"/>
              <clip pos="6" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="6" side="tl" part="gen_mf"/>
              <clip pos="6" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="6" side="tl" part="nbr_sp"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: det num nom de cada num">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_num_nom_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="6" side="tl" part="gen_mf"/>
              <clip pos="6" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="6" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: num de cada num adj">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="5"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_adj"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_num"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: num adj de cada num">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: det num de cada num adj">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="6"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="6" side="tl" part="lemh"/>
              <clip pos="6" side="tl" part="a_adj"/>
              <clip pos="6" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="6" side="tl" part="gen_mf"/>
              <clip pos="6" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="6" side="tl" part="nbr_sp"/>
              <clip pos="6" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_num"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: det num adj de cada num">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="de"/>
        <pattern-item n="cada"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="6"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_num_adj_sur_num" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_num"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="sur"/>
              <lit-tag v="pr"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <clip pos="6" side="tl" part="a_num"/>
              <clip pos="6" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="6" side="tl" part="gen_mf"/>
              <clip pos="6" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="6" side="tl" part="nbr_sp"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
   
    <rule comment="REGLA: DET NOM ADV ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <lit v="más"/>
              </equal>
            </test>
            <out>
              <chunk name="det_nom_det_adv_adj" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det_nom_adv_adj" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_adj"/>
                  <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="4" side="tl" part="gen_mf"/>
                  <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="4" side="tl" part="nbr_sp"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: NUM NOM ADV ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_nom_adv_adj" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_nom"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: DET ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: DET ADJ ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: DET ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_adj" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SA"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: DET ADJ cnj  ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det_adj_cnjcoo_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_det"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: NUM ADV ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adv_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adj"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_nom"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: NUM ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_nom"/>
              <clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="3" side="tl" part="gen_mf"/>
              <clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="3" side="tl" part="nbr_sp"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: NUM ADJ cnj  ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="cnjcoo"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="5"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="num_adj_cnjcoo_adj_nom" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <var n="genero"/>
              </tag>
              <tag>
                <var n="numero"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_num"/>
              <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="1" side="tl" part="gen_mf"/>
              <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="1" side="tl" part="nbr_sp"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adj"/>
              <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="2" side="tl" part="gen_mf"/>
              <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="2" side="tl" part="nbr_sp"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_adj"/>
              <clip pos="4" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="4" side="tl" part="gen_mf"/>
              <clip pos="4" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="4" side="tl" part="nbr_sp"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="a_nom"/>
              <clip pos="5" side="tl" part="gen_sense_mf" link-to="2"/>
              <clip pos="5" side="tl" part="gen_mf"/>
              <clip pos="5" side="tl" part="nbr_sense_sp" link-to="3"/>
              <clip pos="5" side="tl" part="nbr_sp"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: ADJ NOM">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="tl" part="lem"/>
                <list n="part_sing"/>
              </in>
            </test>
            <out>
              <chunk name="partadj_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adj_nom" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adj"/>
                  <clip pos="1" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="1" side="tl" part="gen_mf"/>
                  <clip pos="1" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="1" side="tl" part="nbr_sp"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_nom"/>
                  <clip pos="2" side="tl" part="gen_sense_mf" link-to="2"/>
                  <clip pos="2" side="tl" part="gen_mf"/>
                  <clip pos="2" side="tl" part="nbr_sense_sp" link-to="3"/>
                  <clip pos="2" side="tl" part="nbr_sp"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>

   <rule comment="REGLA: que relatiu (s'enxunca a part)">
      <pattern>
        <pattern-item n="querel"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="que" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="querel"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_rel"/>
              <clip pos="1" side="tl" part="gen"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
<!-- *************************************** REGLES DE SV *********************************************** -->

   
    <rule comment="REGLA: adv VERB adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="2"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="3" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="2" side="sl" part="pers"/>
                          <clip pos="2" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <lit-tag v="pp.m.sg"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="2" side="sl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="2" side="sl" part="pers"/>
                          <clip pos="2" side="sl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="2" side="tl" part="lemh"/>
                          <clip pos="2" side="tl" part="a_verb"/>
                          <lit-tag v="pp.m.sg"/>
                          <clip pos="2" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                      <b pos="2"/>
                      <chunk name="adv">
                        <tags>
                          <tag>
                            <clip pos="3" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <clip pos="3" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="1" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <lit v="ne"/>
                          </get-case-from>
                          <lit-tag v="adv"/>
                        </lu>
                      </chunk>
                      <b/>
                    </out>
                  </when>
                </choose>
                <out>
                  <chunk name="aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="2" side="sl" part="pers"/>
                      <clip pos="2" side="sl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <lit-tag v="pp.m.sg"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="3" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="2"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="3" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <choose>
                  <when>
                    <test>
                      <not>
                        <in caseless="yes">
                          <clip pos="3" side="tl" part="lem"/>
                          <list n="adv_neg"/>
                        </in>
                      </not>
                    </test>
                    <call-macro n="envia_pas">
                      <with-param pos="1"/>
                    </call-macro>
                  </when>
                </choose>
                <out>
                  <b pos="2"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="3" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: PP">
      <pattern>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
           <test>
             <or>
             <equal>
               <var n="numero"/>
               <lit-tag v="sp"/>
             </equal>
             <equal>
               <var n="numero"/>
               <lit-tag v="ND"/>
             </equal>
             </or>
           </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
           </when>
        </choose>
        <choose>
          <when>
           <test>
             <or>
             <equal>
               <var n="genero"/>
               <lit-tag v="mf"/>
             </equal>
             <equal>
               <var n="genero"/>
               <lit-tag v="GD"/>
             </equal>
             </or>
           </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
           </when>
        </choose>
            <out>
              <chunk name="pp" case="caseFirstWord">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag>
                    <var n="genero"/>
                  </tag>
                  <tag>
                    <var n="numero"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <lit-tag v="pp"/>
                  <var n="genero"/>
                  <var n="numero"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
     </action>
   </rule>
    
 

    
    <rule comment="REGLA: VERB">
      <pattern>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="1" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="1"/>
            </call-macro>
	    <choose>
	     <when>
		<test>   
                   <in caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <list n="vbpron"/>
                    </in>
            	</test>
                <let>
                <var n="lema"/>
                <lit v="pronaux_pp"/>
		</let>  
	      </when>
	      <otherwise>
		<let>
		<var n="lema"/>
		<lit v="aux_pp"/>
                </let>
   	      </otherwise>
	    </choose>
            <out>
              <chunk namefrom="lema" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="sl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers" link-to="4"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  </tag>
                </tags>
                <lu>
                  <var n="auxiliar"/>
                  <var n="etiq_aux"/>
                  <lit-tag v="pri"/>
                  <clip pos="1" side="tl" part="pers"/>
                  <clip pos="1" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <lit-tag v="pp.m.sg"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
           <choose>        
	     <when>
		<test>   
                   <in caseless="yes">
                      <clip pos="1" side="sl" part="lem"/>
                      <list n="vbpron"/>
                    </in>
            	</test>
                <let>
                <var n="lema"/>
                <lit v="pronverb"/>
		</let>  
	      </when>
	      <otherwise>
		<let>
		<var n="lema"/>
		<lit v="verb"/>
                </let>
   	      </otherwise>
	    </choose>
            <out>
              <chunk namefrom="lema" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="1" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_verb"/>
                  <clip pos="1" side="tl" part="temps"/>
                  <clip pos="1" side="tl" part="pers" link-to="4"/>
                  <clip pos="1" side="tl" part="nbr" link-to="5"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
       
    <rule comment="REGLA: ir a inf -&gt; aller inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_verb" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: ir a inf enc -&gt; aller pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="4"/>
		      <with-param pos="1"/>
		      <with-param pos="3"/>
	      </call-macro>
       <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="aller_inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</when>
		<otherwise>
			<out>
				<chunk name="aller_pro_inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="4" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="4" side="tl" part="tipoenc_pro"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
        		</out>	
		</otherwise>
	</choose>
	<call-macro n="f_bcond">
		<with-param pos="3"/>
		<with-param pos="4"/>
	</call-macro>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: ir a inf enc enc-&gt; aller a pro pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ir a inf -&gt; aller adv inf">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aller_adv_verb">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: ir a inf adv-&gt; aller adv inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_adv_verb" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ir a inf adv-&gt; aller adv inf adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="5" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aller_adv_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="4"/>
                  <with-param pos="5"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aller_adv_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="4"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="5" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <clip pos="5" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ir a inf enc -&gt; aller adv pro inf">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
	<call-macro n="control_ref_aux">
		<with-param pos="5"/>
		<with-param pos="2"/>
		<with-param pos="4"/>
	</call-macro>
       <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
				<out>
					<chunk name="adv" case="caseFirstWord">
						<tags>
						<tag>
						<clip pos="1" side="tl" part="a_adv"/>
						</tag>
						</tags>
						<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_adv"/>
						</lu>
					</chunk>
					<b/>
					<chunk name="aller_adv_inf">
						<tags>
							<tag>
							<lit-tag v="SV"/>
							</tag>
							<tag>
							<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
							<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
							<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
							<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
							<lit v="pas"/>
							<lit-tag v="adv"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
				<call-macro n="f_bcond">
					<with-param pos="3"/>
					<with-param pos="4"/>
				</call-macro>
 			</when>
			<otherwise>
				<out>
					<chunk name="adv" case="caseFirstWord">
						<tags>
							<tag>
								<clip pos="1" side="tl" part="a_adv"/>
							</tag>
						</tags>
						<lu>
							<clip pos="1" side="tl" part="lem"/>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
					</chunk>
					<b/>
					<chunk name="aller_adv_pro_inf">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
							<lit v="pas"/>
							<lit-tag v="adv"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="5" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="3"/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</otherwise>	
		</choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
	    
				<out>
					<chunk name="aller_adv_inf" case="caseFirstWord">
						<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="nbr"/>
						</tag>
						</tags>
						<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
						<get-case-from pos="2">
						<clip pos="1" side="tl" part="lem"/>
						</get-case-from>
						<clip pos="1" side="tl" part="a_adv"/>
						</lu>
						<b pos="2"/>
						<lu>
						<clip pos="4" side="tl" part="lemh"/>
						<clip pos="4" side="tl" part="a_verb"/>
						<clip pos="4" side="tl" part="temps"/>
						<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
				<call-macro n="f_bcond">
					<with-param pos="3"/>
					<with-param pos="4"/>
				</call-macro>
			</when>
			<otherwise>
				<out>
					<chunk name="aller_adv_pro_inf" case="caseFirstWord">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
							<get-case-from pos="2">
								<clip pos="1" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="5" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="3"/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>	
			</otherwise>
		</choose>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ir a inf enc adv-&gt; aller adv pro inf adv">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
	<call-macro n="control_ref_aux">
		<with-param pos="5"/>
		<with-param pos="2"/>
		<with-param pos="4"/>
	</call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="6" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
	  	</out>
		  <choose>
			  <when>
				  <test>
					  <equal>
						  <var n="treu_ref"/>
						  <lit v="treu"/>
					  </equal>
				  </test>
                  		<out>
				<b pos="1"/>
				<chunk name="aller_adv_inf">
				<tags>
				<tag>
					<lit-tag v="SV"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="a_verb"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="temps"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="pers"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="nbr"/>
				</tag>
				</tags>
				<lu>
				<clip pos="2" side="tl" part="lem"/>
				<clip pos="2" side="tl" part="a_verb"/>
				<clip pos="2" side="tl" part="temps"/>
				<clip pos="2" side="tl" part="pers"/>
				<clip pos="2" side="tl" part="nbr"/>
				</lu>
				<b pos="2"/>
				<lu>
				<clip pos="6" side="tl" part="whole"/>
				</lu>
				<b pos="3"/>
				<lu>
				<clip pos="4" side="tl" part="lemh"/>
				<clip pos="4" side="tl" part="a_verb"/>
				<clip pos="4" side="tl" part="temps"/>
				<clip pos="4" side="tl" part="lemq"/>
				</lu>
				</chunk>
				</out>
				<call-macro n="f_bcond">
					<with-param pos="4"/>
					<with-param pos="5"/>
				</call-macro>
			</when>
			<otherwise>
				<out>
					<b pos="1"/>
					<chunk name="aller_adv_pro_inf">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="6" side="tl" part="whole"/>
						</lu>
						<b pos="3"/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="5" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="5"/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>	
			</otherwise>
		</choose>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>
				<b pos="1"/>
				<chunk name="aller_adv_inf">
				<tags>
				<tag>
					<lit-tag v="SV"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="a_verb"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="temps"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="pers"/>
				</tag>
				<tag>
					<clip pos="2" side="tl" part="nbr"/>
				</tag>
				</tags>
				<lu>
				<clip pos="2" side="tl" part="lem"/>
				<clip pos="2" side="tl" part="a_verb"/>
				<clip pos="2" side="tl" part="temps"/>
				<clip pos="2" side="tl" part="pers"/>
				<clip pos="2" side="tl" part="nbr"/>
				</lu>
				<b pos="2"/>
				<lu>
				<lit v="pas"/>
				<lit-tag v="adv"/>
				</lu>
				<b pos="3"/>
				<lu>
				<clip pos="4" side="tl" part="lemh"/>
				<clip pos="4" side="tl" part="a_verb"/>
				<clip pos="4" side="tl" part="temps"/>
				<clip pos="4" side="tl" part="lemq"/>
				</lu>
				</chunk>
			</out>
		</when>
		<otherwise>
			<out>
				<b/>
				<chunk name="aller_adv_pro_inf">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<lit v="pas"/>
						<lit-tag v="adv"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="5" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="5" side="tl" part="tipoenc_pro"/>
					</lu>
					<b pos="3"/>
					<lu>
						<clip pos="4" side="tl" part="lemh"/>
						<clip pos="4" side="tl" part="a_verb"/>
						<clip pos="4" side="tl" part="temps"/>
						<clip pos="4" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</otherwise>
	</choose>
		<out>
 			<b pos="5"/>
			<chunk name="adv">
				<tags>
					<tag>
						<clip pos="6" side="tl" part="a_adv"/>
					</tag>
				</tags>
				<lu>
					<clip pos="6" side="tl" part="lem"/>
					<clip pos="6" side="tl" part="a_adv"/>
				</lu>
			</chunk>
		</out>
             </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
				<out>
					<chunk name="aller_adv_pro_inf" case="caseFirstWord">
						<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="nbr"/>
						</tag>
						</tags>
						<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
						<get-case-from pos="2">
						<clip pos="1" side="tl" part="lem"/>
						</get-case-from>
						<clip pos="1" side="tl" part="a_adv"/>
						</lu>
						<b pos="2"/>
						<lu>
						<clip pos="5" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="5" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="3"/>
						<lu>
						<clip pos="4" side="tl" part="lemh"/>
						<clip pos="4" side="tl" part="a_verb"/>
						<clip pos="4" side="tl" part="temps"/>
						<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</when>
			<otherwise>
				<out>
					<chunk name="aller_adv_pro_inf" case="caseFirstWord">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
							<get-case-from pos="2">
								<clip pos="1" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="5" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="5" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="3"/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_verb"/>
							<clip pos="4" side="tl" part="temps"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
              				</chunk>
				</out>
			</otherwise>
		</choose>
		<out>
              <b pos="5"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="6" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
       </action>
   </rule>
    
   <rule comment="REGLA: ir a inf enc adv -&gt; aller adv pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="4"/>
		      <with-param pos="1"/>
		      <with-param pos="3"/>
	      </call-macro>
       <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
        <out>
          <chunk name="aller_adv_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
		<call-macro n="f_bcond">
			<with-param pos="3"/>
			<with-param pos="4"/>
		</call-macro>
 		</when>
		<otherwise>
			<out>
				<chunk name="aller_adv_pro_inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="5" side="tl" part="whole"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="4" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="4" side="tl" part="tipoenc_pro"/>
					</lu>
					<b pos="3"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
        		</out>
			<call-macro n="f_bcond">
				<with-param pos="4"/>
				<with-param pos="5"/>
			</call-macro>
 		</otherwise>
	</choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ir a inf enc enc-&gt; aller adv pro pro inf">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aller_adv_pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: ir a inf enc enc adv-&gt; aller adv pro pro inf">
      <pattern>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aller_adv_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="5"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ir a inf enc enc enc-&gt; aller adv pro pro inf enc">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="7" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aller_adv_pro_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="7" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="6"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="aller_adv_pro_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="5" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="6"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="7" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lem"/>
                      <clip pos="7" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
              </when>
            </choose>
            <out>
              <chunk name="aller_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="5" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="6"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="7" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <clip pos="7" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: ger -&gt; en ger">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv ger">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
   
    <rule comment="prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="control_ref">
		<with-param pos="1"/>
		<with-param pos="2"/>
	</call-macro>
	<call-macro n="haber">
		<with-param pos="2"/>
	</call-macro>
	<call-macro n="pih_prh_past_cip">
		<with-param pos="2"/>
	</call-macro>
	<call-macro n="f_imp">
		<with-param pos="2"/>
	</call-macro>
               <choose>
          <when>
            <test>
              <equal>
                <clip pos="2" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="2"/>
            </call-macro>
            <choose>
<!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
<!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
				<out>
				<chunk name="aux_pp" case="caseFirstWord">
					<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="2" side="sl" part="temps"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<var n="auxiliar"/>
						<var n="etiq_aux"/>
						<lit-tag v="pri"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="2" side="tl" part="lemh"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<lit-tag v="pp"/>
						<var n="gen_pp"/>
						<var n="nbr_pp"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
				</chunk>
				</out>
			</when>
			<otherwise>
				<out>
					<chunk name="pro_aux_pp" case="caseFirstWord">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="sl" part="temps"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="1" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="1" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="1"/>
						<lu>
							<var n="auxiliar"/>
							<var n="etiq_aux"/>
							<lit-tag v="pri"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<lit-tag v="pp"/>
							<var n="gen_pp"/>
							<var n="nbr_pp"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</chunk>
			            </out>
			    </otherwise>
		    </choose>
          </when>
          <otherwise>
		  <choose>
			  <when>
				  <test>
					  <equal>
						  <var n="treu_ref"/>
						  <lit v="treu"/>
					  </equal>
				  </test>
				<out>
				<chunk name="verb" case="caseFirstWord">
					<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<get-case-from pos="1">
							<clip pos="2" side="tl" part="lemh"/>
						</get-case-from>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
				</chunk>
				</out>
				<call-macro n="f_bcond">
					<with-param pos="1"/>
					<with-param pos="2"/>
				</call-macro>
			</when>
			<otherwise>
				<out>
					<chunk name="pro_verb" case="caseFirstWord">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="1" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="1" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="1"/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</chunk>
            			</out>
			</otherwise>
		</choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
     </action>
   </rule>
    
    <rule comment="adv prnpro verbpers">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
	      <call-macro n="control_ref">
		      <with-param pos="2"/>
		      <with-param pos="3"/>
	      </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="3" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <choose>
<!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>
				<chunk name="aux_adv_pp">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<get-case-from pos="1">
							<var n="auxiliar"/>
						</get-case-from>
						<var n="etiq_aux"/>
						<lit-tag v="pri"/>
						<clip pos="3" side="tl" part="pers"/>
						<clip pos="3" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<get-case-from pos="2">
							<clip pos="1" side="tl" part="lem"/>
						</get-case-from>
						<clip pos="1" side="tl" part="a_adv"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<lit-tag v="pp"/>
						<var n="gen_pp"/>
						<var n="nbr_pp"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</when>
		<otherwise>
			<out>
				<chunk name="pro_aux_adv_pp">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="2" side="tl" part="tipoenc_pro"/>
					</lu>
					<b pos="1"/>
					<lu>
						<var n="auxiliar"/>
						<var n="etiq_aux"/>
						<lit-tag v="pri"/>
						<clip pos="3" side="tl" part="pers"/>
						<clip pos="3" side="tl" part="nbr"/>
					</lu>
					<b/>
					<lu>
						<get-case-from pos="2">
							<clip pos="1" side="tl" part="lem"/>
						</get-case-from>
						<clip pos="1" side="tl" part="a_adv"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<lit-tag v="pp"/>
						<var n="gen_pp"/>
						<var n="nbr_pp"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</otherwise>
	      </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal caseless="yes">
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="no"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b/>
	      </out>
	      <choose>
		      <when>
			      <test>
				      <equal>
					      <var n="treu_ref"/>
					      <lit v="treu"/>
				      </equal>
			      </test>
			      <out>
					<chunk name="aux_adv_pp">
						<tags>
							<tag>
							<lit-tag v="SV"/>
							</tag>
							<tag>
							<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
							<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
							<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
							<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<get-case-from pos="1">
								<var n="auxiliar"/>
							</get-case-from>
							<var n="etiq_aux"/>
							<lit-tag v="pri"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
						</lu>
						<b pos="1"/>
						<lu>
						<lit v="pas"/>
						<lit-tag v="adv"/>
						</lu>
						<b pos="2"/>
						<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<lit-tag v="pp"/>
						<var n="gen_pp"/>
						<var n="nbr_pp"/>
						<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</when>
			<otherwise>
					<out>
						<chunk name="pro_aux_adv_pp">
							<tags>
								<tag>
									<lit-tag v="SV"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="a_verb"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="temps"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="pers"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="nbr"/>
								</tag>
							</tags>
							<lu>
								<clip pos="2" side="tl" part="lem"/>
								<lit-tag v="prn.pro"/>
								<clip pos="2" side="tl" part="tipoenc_pro"/>
							</lu>
							<b pos="1"/>
							<lu>
								<var n="auxiliar"/>
								<var n="etiq_aux"/>
								<lit-tag v="pri"/>
								<clip pos="3" side="tl" part="pers"/>
								<clip pos="3" side="tl" part="nbr"/>
							</lu>
							<b/>
							<lu>
								<lit v="pas"/>
								<lit-tag v="adv"/>
							</lu>
							<b pos="2"/>
							<lu>
								<clip pos="3" side="tl" part="lemh"/>
								<clip pos="3" side="tl" part="a_verb"/>
								<lit-tag v="pp"/>
								<var n="gen_pp"/>
								<var n="nbr_pp"/>
								<clip pos="3" side="tl" part="lemq"/>
							</lu>
						</chunk>
					</out>
				</otherwise>
			</choose>

                  </when>
                  <otherwise>
			  <choose>
				  <when>
					  <test>
						  <equal>
							  <var n="treu_ref"/>
							  <lit v="treu"/>
						  </equal>
					  </test>
					  <out>

						<chunk name="aux_adv_pp" case="caseFirstWord">
							<tags>
								<tag>
								<lit-tag v="SV"/>
								</tag>
								<tag>
								<clip pos="3" side="tl" part="a_verb"/>
								</tag>
								<tag>
								<clip pos="3" side="tl" part="temps"/>
								</tag>
								<tag>
								<clip pos="3" side="tl" part="pers"/>
								</tag>
								<tag>
								<clip pos="3" side="tl" part="nbr"/>
								</tag>
							</tags>
							<lu>
								<var n="auxiliar"/>
								<var n="etiq_aux"/>
								<lit-tag v="pri"/>
								<clip pos="3" side="tl" part="pers"/>
								<clip pos="3" side="tl" part="nbr"/>
							</lu>
							<b pos="1"/>
							<lu>
								<get-case-from pos="2">
								<clip pos="1" side="tl" part="lem"/>
								</get-case-from>
								<clip pos="1" side="tl" part="a_adv"/>
							</lu>
							<b pos="2"/>
							<lu>
								<clip pos="3" side="tl" part="lemh"/>
								<clip pos="3" side="tl" part="a_verb"/>
								<lit-tag v="pp"/>
								<var n="gen_pp"/>
								<var n="nbr_pp"/>
								<clip pos="3" side="tl" part="lemq"/>
							</lu>
						</chunk>
					</out>
				</when>
				<otherwise>
					<choose>
						<when>
							<test>
								<equal>
									<var n="treu_ref"/>
									<lit v="treu"/>
								</equal>
							</test>
							<out>
								<chunk name="aux_adv_pp" case="caseFirstWord">
									<tags>
										<tag>
											<lit-tag v="SV"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="a_verb"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="temps"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="pers"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="nbr"/>
										</tag>
									</tags>
									<lu>
										<get-case-from pos="1">
											<var n="auxiliar"/>
										</get-case-from>
										<var n="etiq_aux"/>
										<lit-tag v="pri"/>
										<clip pos="3" side="tl" part="pers"/>
										<clip pos="3" side="tl" part="nbr"/>
									</lu>
									<b pos="1"/>
									<lu>
										<get-case-from pos="2">
											<clip pos="1" side="tl" part="lem"/>
										</get-case-from>
										<clip pos="1" side="tl" part="a_adv"/>
									</lu>
									<b pos="2"/>
									<lu>
										<clip pos="3" side="tl" part="lemh"/>
										<clip pos="3" side="tl" part="a_verb"/>
										<lit-tag v="pp"/>
										<var n="gen_pp"/>
										<var n="nbr_pp"/>
										<clip pos="3" side="tl" part="lemq"/>
									</lu>
								</chunk>
							</out>
						</when>
						<otherwise>
							<out>
								<chunk name="pro_aux_adv_pp" case="caseFirstWord">
									<tags>
										<tag>
											<lit-tag v="SV"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="a_verb"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="temps"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="pers"/>
										</tag>
										<tag>
											<clip pos="3" side="tl" part="nbr"/>
										</tag>
									</tags>
									<lu>
										<get-case-from pos="1">
											<clip pos="2" side="tl" part="lem"/>
										</get-case-from>
										<lit-tag v="prn.pro"/>
										<clip pos="2" side="tl" part="tipoenc_pro"/>
									</lu>
									<b pos="1"/>
									<lu>
										<var n="auxiliar"/>
										<var n="etiq_aux"/>
										<lit-tag v="pri"/>
										<clip pos="3" side="tl" part="pers"/>
										<clip pos="3" side="tl" part="nbr"/>
									</lu>
									<b pos="1"/>
									<lu>
										<get-case-from pos="2">
											<clip pos="1" side="tl" part="lem"/>
										</get-case-from>
										<clip pos="1" side="tl" part="a_adv"/>
									</lu>
									<b pos="2"/>
									<lu>
										<clip pos="3" side="tl" part="lemh"/>
										<clip pos="3" side="tl" part="a_verb"/>
										<lit-tag v="pp"/>
										<var n="gen_pp"/>
										<var n="nbr_pp"/>
										<clip pos="3" side="tl" part="lemq"/>
									</lu>
								</chunk>
							</out>
						</otherwise>
					</choose>
				    </otherwise>
			    </choose>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="pih_prh_past_cip">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	  	</out>
			<choose>
				<when>
					<test>
						<equal>
							<var n="treu_ref"/>
							<lit v="treu"/>
						</equal>
					</test>
					<out>

					<chunk name="verb">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
					<b pos="2"/>
					<chunk name="adv">
						<tags>
							<tag>
								<clip pos="1" side="tl" part="a_adv"/>
							</tag>
						</tags>
						<lu>
							<get-case-from pos="2">
								<clip pos="1" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
					</chunk>
				</out>
			</when>
			<otherwise>
				<out>
					<chunk name="pro_verb">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
					<b/>
					<chunk name="adv">
						<tags>
							<tag>
								<clip pos="1" side="tl" part="a_adv"/>
							</tag>
						</tags>
						<lu>
							<clip pos="1" side="tl" part="lem"/>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>

				<chunk name="verb">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="pers"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
				</out>
				<call-macro n="f_bcond">
					<with-param pos="2"/>
					<with-param pos="3"/>
				</call-macro>
 			</when>
			<otherwise>
				<out>
					<chunk name="pro_verb">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>
	
			<call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="adv prnpro verbpers adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
	      <call-macro n="control_ref">
		      <with-param pos="2"/>
		      <with-param pos="3"/>
	      </call-macro>
       <call-macro n="pih_prh_past_cip">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="3" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <choose>
<!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="4" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
	           </out>
		<choose>
			<when>
				<test>
					<equal>
						<var n="treu_ref"/>
						<lit v="treu"/>
					</equal>
				</test>
				<out>

					<chunk name="aux_adv_pp">
						<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="nbr"/>
						</tag>
						</tags>
						<lu>
						<var n="auxiliar"/>
						<var n="etiq_aux"/>
						<lit-tag v="pri"/>
						<clip pos="3" side="sl" part="pers"/>
						<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b pos="2"/>
						<lu>
						<clip pos="4" side="tl" part="lem"/>
						<clip pos="4" side="tl" part="a_adv"/>
						</lu>
						<b pos="3"/>
						<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<lit-tag v="pp"/>
						<var n="gen_pp"/>
						<var n="nbr_pp"/>
						<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</when>
			<otherwise>
				<out>
					<chunk name="pro_aux_adv_pp">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="tipoenc_pro"/>
						</lu>
						<b/>
						<lu>
							<var n="auxiliar"/>
							<var n="etiq_aux"/>
							<lit-tag v="pri"/>
							<clip pos="3" side="sl" part="pers"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="4" side="tl" part="lem"/>
							<clip pos="4" side="tl" part="a_adv"/>
						</lu>
						<b pos="3"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<lit-tag v="pp"/>
							<var n="gen_pp"/>
							<var n="nbr_pp"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
						
			                      </chunk>
					</out>
				</otherwise>
			</choose>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
	      </out>
	      <choose>
		      <when>
			      <test>
				      <equal>
					      <var n="treu_ref"/>
					      <lit v="treu"/>
				      </equal>
			      </test>
			      <out>

				<chunk name="aux_adv_pp">
					<tags>
					<tag>
					<lit-tag v="SV"/>
					</tag>
					<tag>
					<clip pos="3" side="sl" part="a_verb"/>
					</tag>
					<tag>
					<clip pos="3" side="sl" part="temps"/>
					</tag>
					<tag>
					<clip pos="3" side="sl" part="pers"/>
					</tag>
					<tag>
					<clip pos="3" side="sl" part="nbr"/>
					</tag>
					</tags>
					<lu>
					<var n="auxiliar"/>
					<var n="etiq_aux"/>
					<lit-tag v="pri"/>
					<clip pos="3" side="sl" part="pers"/>
					<clip pos="3" side="sl" part="nbr"/>
					</lu>
					<b pos="2"/>
					<lu>
					<lit v="pas"/>
					<lit-tag v="adv"/>
					</lu>
					<b/>
					<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_verb"/>
					<lit-tag v="pp"/>
					<var n="gen_pp"/>
					<var n="nbr_pp"/>
					<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
				</out>
				</when>
				<otherwise>
					<out>
					<chunk name="pro_aux_adv_pp">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="sl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="sl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="sl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="sl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="2"/>
						<lu>
							<var n="auxiliar"/>
							<var n="etiq_aux"/>
							<lit-tag v="pri"/>
							<clip pos="3" side="sl" part="pers"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<lit v="pas"/>
							<lit-tag v="adv"/>
						</lu>
						<b/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<lit-tag v="pp"/>
							<var n="gen_pp"/>
							<var n="nbr_pp"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
				</otherwise>
			</choose>
			<out>
				<b pos="3"/>
				<chunk name="adv">
					<tags>
						<tag>
							<clip pos="4" side="tl" part="a_adv"/>
						</tag>
					</tags>
					<lu>
						<clip pos="4" side="tl" part="lem"/>
						<clip pos="4" side="tl" part="a_adv"/>
					</lu>
				</chunk>
			</out>

                  </otherwise>
                </choose>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <in caseless="yes">
                        <clip pos="1" side="tl" part="lem"/>
                        <list n="adv_neg"/>
                      </in>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <lit v="ne"/>
                          </get-case-from>
                          <lit-tag v="adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                    </out>
                  </when>
                </choose>
		<choose>
			<when>
				<test>
					<equal>
						<var n="treu_ref"/>
						<lit v="treu"/>
					</equal>
				</test>
			
				<out>
					<chunk name="aux_adv_pp" case="caseFirstWord">
					<tags>
					<tag>
						<lit-tag v="SV"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="a_verb"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="temps"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="pers"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="nbr"/>
					</tag>
					</tags>
					<lu>
					<var n="auxiliar"/>
					<var n="etiq_aux"/>
					<lit-tag v="pri"/>
					<clip pos="3" side="sl" part="pers"/>
					<clip pos="3" side="sl" part="nbr"/>
					</lu>
					<b/>
					<lu>
					<get-case-from pos="2">
						<clip pos="1" side="tl" part="lem"/>
					</get-case-from>
					<clip pos="1" side="tl" part="a_adv"/>
					</lu>
					<b pos="2"/>
					<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_verb"/>
					<lit-tag v="pp"/>
					<var n="gen_pp"/>
					<var n="nbr_pp"/>
					<clip pos="3" side="tl" part="lemq"/>
					</lu>
					</chunk>
					<b pos="3"/>
					<chunk name="adv">
					<tags>
					<tag>
						<clip pos="4" side="tl" part="a_adv"/>
					</tag>
					</tags>
					<lu>
					<clip pos="4" side="tl" part="lem"/>
					<clip pos="4" side="tl" part="a_adv"/>
					</lu>
					</chunk>
				</out>
			</when>
			<otherwise>
				
				<out>
					<chunk name="pro_aux_adv_pp" case="caseFirstWord">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="tipoenc_pro"/>
						</lu>
						<b/>
						<lu>
							<var n="auxiliar"/>
							<var n="etiq_aux"/>
							<lit-tag v="pri"/>
							<clip pos="3" side="sl" part="pers"/>
							<clip pos="3" side="sl" part="nbr"/>
						</lu>
						<b/>
						<lu>
							<get-case-from pos="2">
								<clip pos="1" side="tl" part="lem"/>
							</get-case-from>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<lit-tag v="pp"/>
							<var n="gen_pp"/>
							<var n="nbr_pp"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
					<b pos="3"/>
					<chunk name="adv">
						<tags>
							<tag>
								<clip pos="4" side="tl" part="a_adv"/>
							</tag>
						</tags>
						<lu>
							<clip pos="4" side="tl" part="lem"/>
							<clip pos="4" side="tl" part="a_adv"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>
		</otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="pih_prh_past_cip">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>

				<chunk name="verb">
				<tags>
				<tag>
					<lit-tag v="SV"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="a_verb"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="temps"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="pers"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="nbr"/>
				</tag>
				</tags>
				<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_verb"/>
					<clip pos="3" side="tl" part="temps"/>
					<clip pos="3" side="tl" part="pers"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
				</lu>
				</chunk>
				<b pos="2"/>
			</out>
		</when>
		<otherwise>
			<out>
				<chunk name="pro_verb">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="2" side="tl" part="tipoenc_pro"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="pers"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
				<b/>
			</out>
		</otherwise>
	</choose>
	<out>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="3"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="4" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	       </out>
			<choose>
				<when>
					<test>
						<equal>
							<var n="treu_ref"/>
							<lit v="treu"/>
						</equal>
					</test>
					<out>
				
						<chunk name="verb">
						<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="nbr"/>
						</tag>
						</tags>
						<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="pers"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
						</lu>
						</chunk>
					</out>
					<call-macro n="f_bcond">
						<with-param pos="2"/>
						<with-param pos="3"/>
					</call-macro>
				</when>
				<otherwise>
					<out>
					<chunk name="pro_verb">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="2" side="tl" part="tipoenc_pro"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>
		<choose>
                  <when>
                    <test>
                      <not>
                        <in caseless="yes">
                          <clip pos="4" side="tl" part="lem"/>
                          <list n="adv_neg"/>
                        </in>
                      </not>
                    </test>
                    <call-macro n="envia_pas">
                      <with-param pos="1"/>
                    </call-macro>
                  </when>
                </choose>
                <out>
                  <b pos="3"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="4" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <clip pos="4" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="3" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="3"/>
            </call-macro>
            <choose>
<!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <out>
              <chunk name="pro_pro_aux_pp" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="sl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="1" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="2" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <var n="auxiliar"/>
                  <var n="etiq_aux"/>
                  <lit-tag v="pri"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <lit-tag v="pp"/>
                  <var n="gen_pp"/>
                  <var n="nbr_pp"/>
<!--<clip pos="2" side="sl" part="gen"/>
							<clip pos="2" side="sl" part="nbr"/>-->
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="pih_prh_past_cip">
              <with-param pos="3"/>
            </call-macro>
            <out>
              <chunk name="pro_pro_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="pers"/>
                  <clip pos="3" side="tl" part="nbr"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv prnpro prnpro verbpers">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbpers"/>
      </pattern>
      <action>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_imp">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="haber">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <clip pos="4" side="sl" part="temps"/>
                <lit-tag v="ifi"/>
              </equal>
            </test>
            <call-macro n="aux_ifi">
              <with-param pos="4"/>
            </call-macro>
            <choose>
<!--per poder fer concordar el gen i el nbr del pp amb el del prn-->
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="gen"/>
                    <lit-tag v="f"/>
                  </equal>
                </test>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="f"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="gen_pp"/>
                  <lit-tag v="m"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <equal>
                    <clip pos="2" side="sl" part="nbr"/>
                    <lit-tag v="pl"/>
                  </equal>
                </test>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="pl"/>
                </let>
              </when>
              <otherwise>
                <let>
                  <var n="nbr_pp"/>
                  <lit-tag v="sg"/>
                </let>
              </otherwise>
            </choose>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="pro_pro_aux_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="2" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <var n="auxiliar"/>
                      <var n="etiq_aux"/>
                      <lit-tag v="pri"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                    </lu>
                    <b/>
                    <lu>
                      <get-case-from pos="2">
                        <clip pos="1" side="tl" part="lem"/>
                      </get-case-from>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <lit-tag v="pp"/>
                      <var n="gen_pp"/>
                      <var n="nbr_pp"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <choose>
                  <when>
                    <test>
                      <equal caseless="yes">
                        <clip pos="1" side="sl" part="lem"/>
                        <lit v="no"/>
                      </equal>
                    </test>
                    <out>
                      <chunk name="adv" case="caseFirstWord">
                        <tags>
                          <tag>
                            <clip pos="1" side="tl" part="a_adv"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="1" side="tl" part="lem"/>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                      </chunk>
                      <b pos="1"/>
                      <chunk name="pro_pro_aux_adv_pp">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <clip pos="2" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="4" side="tl" part="pers"/>
                          <clip pos="4" side="tl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <lit v="pas"/>
                          <lit-tag v="adv"/>
                        </lu>
                        <b/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </when>
                  <otherwise>
                    <out>
                      <chunk name="pro_pro_aux_adv_pp" case="caseFirstWord">
                        <tags>
                          <tag>
                            <lit-tag v="SV"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="a_verb"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="temps"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="pers"/>
                          </tag>
                          <tag>
                            <clip pos="4" side="tl" part="nbr"/>
                          </tag>
                        </tags>
                        <lu>
                          <get-case-from pos="1">
                            <clip pos="2" side="tl" part="lem"/>
                          </get-case-from>
                          <lit-tag v="prn.pro"/>
                          <clip pos="2" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="1"/>
                        <lu>
                          <clip pos="3" side="tl" part="lem"/>
                          <lit-tag v="prn.pro"/>
                          <clip pos="3" side="tl" part="tipoenc_pro"/>
                        </lu>
                        <b pos="2"/>
                        <lu>
                          <var n="auxiliar"/>
                          <var n="etiq_aux"/>
                          <lit-tag v="pri"/>
                          <clip pos="4" side="tl" part="pers"/>
                          <clip pos="4" side="tl" part="nbr"/>
                        </lu>
                        <b/>
                        <lu>
                          <get-case-from pos="2">
                            <clip pos="1" side="tl" part="lem"/>
                          </get-case-from>
                          <clip pos="1" side="tl" part="a_adv"/>
                        </lu>
                        <b pos="3"/>
                        <lu>
                          <clip pos="4" side="tl" part="lemh"/>
                          <clip pos="4" side="tl" part="a_verb"/>
                          <lit-tag v="pp"/>
                          <var n="gen_pp"/>
                          <var n="nbr_pp"/>
                          <clip pos="4" side="tl" part="lemq"/>
                        </lu>
                      </chunk>
                    </out>
                  </otherwise>
                </choose>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <call-macro n="pih_prh_past_cip">
              <with-param pos="3"/>
            </call-macro>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <lit v="ne"/>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>

    <rule comment="REGLA: ger">
      <pattern>
        <pattern-item n="ger"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
   
    <rule comment="inf enc">
      <pattern>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="control_ref">
		<with-param pos="2"/>
		<with-param pos="1"/>
	</call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<lit-tag v="sg"/>
						</tag>
						<!--com a sn és sg ("cantar és important") -->
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lemh"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
						<clip pos="1" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</when>
		<otherwise>
        <out>
          <chunk name="pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
<!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
		</otherwise>
	</choose>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv inf enc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
	      <call-macro n="control_ref">
		      <with-param pos="3"/>
		      <with-param pos="2"/>
	      </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
      </out>
      <choose>
	      <when>
		      <test>
			      <equal>
				      <var n="treu_ref"/>
				      <lit v="treu"/>
			      </equal>
		      </test>
		      <out>
			      <chunk name="inf">
				      <tags>
					      <tag>
						      <lit-tag v="SV"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="a_verb"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="temps"/>
					      </tag>
					      <tag>
						      <lit-tag v="sg"/>
					      </tag>
					      <!--com a sn és sg ("cantar és important") -->
				      </tags>
				      <lu>
					      <clip pos="2" side="tl" part="lemh"/>
					      <clip pos="2" side="tl" part="a_verb"/>
					      <clip pos="2" side="tl" part="temps"/>
					      <clip pos="2" side="tl" part="pers"/>
					      <clip pos="2" side="tl" part="nbr"/>
					      <clip pos="2" side="tl" part="lemq"/>
				      </lu>
			      </chunk>
		      </out>
	      </when>
	      <otherwise>
		      <out>
				<chunk name="pro_inf">
					<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
						<lit-tag v="sg"/>
						</tag>
			<!--com a sn és sg ("cantar és important") -->
					</tags>
					<lu>
						<clip pos="3" side="tl" part="lem"/>
						<lit-tag v="prn.pro"/>
						<clip pos="3" side="tl" part="tipoenc_pro"/>
						</lu>
						<b/>
						<lu>
						<clip pos="2" side="tl" part="lemh"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</otherwise>
	</choose>
	<out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
      </out>
      <choose>
	      <when>
		      <test>
			      <equal>
				      <var n="treu_ref"/>
				      <lit v="treu"/>
			      </equal>
		      </test>
		      <out>
			      <chunk name="pro_inf">
				      <tags>
					      <tag>
						      <lit-tag v="SV"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="a_verb"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="temps"/>
					      </tag>
					      <tag>
						      <lit-tag v="sg"/>
					      </tag>
					      <!--com a sn és sg ("cantar és important") -->
				      </tags>
				      <lu>
					      <clip pos="2" side="tl" part="lemh"/>
					      <clip pos="2" side="tl" part="a_verb"/>
					      <clip pos="2" side="tl" part="temps"/>
					      <clip pos="2" side="tl" part="pers"/>
					      <clip pos="2" side="tl" part="nbr"/>
					      <clip pos="2" side="tl" part="lemq"/>
				      </lu>
			      </chunk>
		      </out>
	      </when>
	      <otherwise>
             <out>
              <chunk name="pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
	    
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="adv inf enc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="control_ref">
		<with-param pos="3"/>
		<with-param pos="2"/>
	</call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
      </out>
      <choose>
	      <when>
		      <test>
			      <equal>
				      <var n="treu_ref"/>
				      <lit v="treu"/>
			      </equal>
		      </test>
		      <out>
			      <chunk name="inf">
				      <tags>
					      <tag>
						      <lit-tag v="SV"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="a_verb"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="temps"/>
					      </tag>
					      <tag>
						      <lit-tag v="sg"/>
					      </tag>
					      <!--com a sn és sg ("cantar és important") -->
				      </tags>
				      <lu>
					      <clip pos="2" side="tl" part="lemh"/>
					      <clip pos="2" side="tl" part="a_verb"/>
					      <clip pos="2" side="tl" part="temps"/>
					      <clip pos="2" side="tl" part="pers"/>
					      <clip pos="2" side="tl" part="nbr"/>
					      <clip pos="2" side="tl" part="lemq"/>
				      </lu>
			      </chunk>
		      </out>
	      </when>
	      <otherwise>
		      <out>
       
              <chunk name="pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
			</out>
		</otherwise>
	</choose>
	<out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
			    <out>
				    <chunk name="inf">
					    <tags>
						    <tag>
							    <lit-tag v="SV"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="a_verb"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="temps"/>
						    </tag>
						    <tag>
							    <lit-tag v="sg"/>
						    </tag>
						    <!--com a sn és sg ("cantar és important") -->
					    </tags>
					    <lu>
						    <clip pos="2" side="tl" part="lemh"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <clip pos="2" side="tl" part="temps"/>
						    <clip pos="2" side="tl" part="pers"/>
						    <clip pos="2" side="tl" part="nbr"/>
						    <clip pos="2" side="tl" part="lemq"/>
					    </lu>
				    </chunk>
			    </out>
		    </when>
		    <otherwise>
			    <out>
				    
              <chunk name="pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
		</otherwise>
	     </choose>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="4" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="inf prnenc prnenc">
      <pattern>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
<!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <get-case-from pos="1">
                <clip pos="2" side="tl" part="lem"/>
              </get-case-from>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <get-case-from pos="2">
                <clip pos="1" side="tl" part="lemh"/>
              </get-case-from>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv inf prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv inf prnenc prnenc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="5" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
   
    <rule comment="no inf enc nada">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="netra"/>
      </pattern>
      <action>
	      <call-macro n="control_ref">
		      <with-param pos="3"/>
		      <with-param pos="2"/>
	      </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <clip pos="4" side="tl" part="a_prn"/>
              <clip pos="4" side="tl" part="tipus_prn"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="2"/>
  	</out>
		<choose>
			<when>
				<test>
					<equal>
						<var n="treu_ref"/>
						<lit v="treu"/>
					</equal>
				</test>
				<out>
					<chunk name="inf">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<lit-tag v="sg"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</when>
			<otherwise>
				<out>
					<chunk name="pro_inf">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="2" side="tl" part="temps"/>
							</tag>
							<tag>
								<lit-tag v="sg"/>
							</tag>
						</tags>
						<lu>
							<clip pos="3" side="tl" part="lem"/>
							<lit-tag v="prn.pro"/>
							<clip pos="3" side="tl" part="tipoenc_pro"/>
						</lu>
						<b/>
						<lu>
							<clip pos="2" side="tl" part="lemh"/>
							<clip pos="2" side="tl" part="a_verb"/>
							<clip pos="2" side="tl" part="temps"/>
							<clip pos="2" side="tl" part="pers"/>
							<clip pos="2" side="tl" part="nbr"/>
							<clip pos="2" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>
		<let>
			<var n="caseFirstWord"/>
			<lit v="aa"/>
		</let>
		<let>
			<var n="treu_ref"/>
			<lit v=""/>
		</let>
      </action>
   </rule>
    
    <rule comment="inf prnenc prnenc">
      <pattern>
        <pattern-item n="no"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="netra"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="adv" case="caseFirstWord">
            <tags>
              <tag>
                <clip pos="1" side="tl" part="a_adv"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_adv"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="prn">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="tipus_prn"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="gen"/>
              </tag>
              <tag>
                <clip pos="5" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_prn"/>
              <clip pos="5" side="tl" part="tipus_prn"/>
              <clip pos="5" side="tl" part="gen"/>
              <clip pos="5" side="tl" part="nbr"/>
            </lu>
          </chunk>
          <b pos="2"/>
          <chunk name="pro_pro_inf">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="4" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="pers"/>
              <clip pos="2" side="tl" part="nbr"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
   </rule>
    
    <rule comment="ger prnenc">
      <pattern>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
	      <call-macro n="control_ref">
		      <with-param pos="2"/>
		      <with-param pos="1"/>
	      </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="ger" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="ger"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<lit v="en"/>
						<lit-tag v="pr"/>
					</lu>
					<b/>
					<lu>
						<clip pos="1" side="tl" part="lemh"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
						<clip pos="1" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</when>
		<otherwise>
        <out>
          <chunk name="pro_ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
		</otherwise>
	</choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="adv ger prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="control_ref">
		<with-param pos="3"/>
		<with-param pos="2"/>
	</call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
             </out>
	     <choose>
		     <when>
			     <test>
				     <equal>
					     <var n="treu_ref"/>
					     <lit v="treu"/>
				     </equal>
			     </test>
			     <out>
				     <chunk name="ger">
					     <tags>
						     <tag>
							     <lit-tag v="ger"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="a_verb"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="temps"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="pers"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="nbr"/>
						     </tag>
					     </tags>
					     <lu>
						     <lit v="en"/>
						     <lit-tag v="pr"/>
					     </lu>
					     <b/>
					     <lu>
						     <clip pos="2" side="tl" part="lemh"/>
						     <clip pos="2" side="tl" part="a_verb"/>
						     <clip pos="2" side="tl" part="temps"/>
						     <clip pos="2" side="tl" part="pers"/>
						     <clip pos="2" side="tl" part="nbr"/>
						     <clip pos="2" side="tl" part="lemq"/>
					     </lu>
				     </chunk>
			     </out>
		     </when>
		     <otherwise>
	     
	     <out>
              <chunk name="pro_ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
		</otherwise>
	</choose>
      <out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
           </out>
	   <choose>
		   <when>
			   <test>
				   <equal>
					   <var n="treu_ref"/>
					   <lit v="treu"/>
				   </equal>
			   </test>
			   <out>
				   <chunk name="ger">
					   <tags>
						   <tag>
							   <lit-tag v="ger"/>
						   </tag>
						   <tag>
							   <clip pos="2" side="tl" part="a_verb"/>
						   </tag>
						   <tag>
							   <clip pos="2" side="tl" part="temps"/>
						   </tag>
						   <tag>
							   <clip pos="2" side="tl" part="pers"/>
						   </tag>
						   <tag>
							   <clip pos="2" side="tl" part="nbr"/>
						   </tag>
					   </tags>
					   <lu>
						   <lit v="en"/>
						   <lit-tag v="pr"/>
					   </lu>
					   <b/>
					   <lu>
						   <clip pos="2" side="tl" part="lemh"/>
						   <clip pos="2" side="tl" part="a_verb"/>
						   <clip pos="2" side="tl" part="temps"/>
						   <clip pos="2" side="tl" part="pers"/>
						   <clip pos="2" side="tl" part="nbr"/>
						   <clip pos="2" side="tl" part="lemq"/>
					   </lu>
				   </chunk>
			   </out>
		   </when>
		   <otherwise>
	   
	   <out>
              <chunk name="pro_ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
		  </otherwise>
		</choose>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="ger prnenc prnenc">
      <pattern>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_ger" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="ger"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <lit v="en"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv ger prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="ger"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_ger">
                <tags>
                  <tag>
                    <lit-tag v="ger"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="en"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="imp prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
	<call-macro n="control_ref">
		<with-param pos="2"/>
		<with-param pos="1"/>
	</call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="imp" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<mlu>
						<lu>
							<clip pos="1" side="tl" part="lemh"/>
							<clip pos="1" side="tl" part="a_verb"/>
							<clip pos="1" side="tl" part="temps"/>
							<clip pos="1" side="tl" part="pers"/>
							<clip pos="1" side="tl" part="nbr"/>
							<clip pos="1" side="tl" part="lemq"/>
						</lu>
					</mlu>
				</chunk>
        		</out>
		</when>
		<otherwise>
       <out>
          <chunk name="imp_enc" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
              <lu>
                <clip pos="2" side="tl" part="whole"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
		</otherwise>
	      </choose>		
	      <let>
		      <var n="treu_ref"/>
		      <lit v=""/>
	      </let>
       <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv imp prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<call-macro n="control_ref">
		<with-param pos="3"/>
		<with-param pos="2"/>
	</call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
            </out>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
			    <out>
				    <b pos="1"/>
				    <chunk name="imp">
					    <tags>
						    <tag>
							    <lit-tag v="SV"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="a_verb"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="temps"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="pers"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="nbr"/>
						    </tag>
					    </tags>
					    <mlu>
						    <lu>
							    <clip pos="2" side="tl" part="lemh"/>
							    <clip pos="2" side="tl" part="a_verb"/>
							    <clip pos="2" side="tl" part="temps"/>
							    <clip pos="2" side="tl" part="pers"/>
							    <clip pos="2" side="tl" part="nbr"/>
							    <clip pos="2" side="tl" part="lemq"/>
						    </lu>
					    </mlu>
				    </chunk>
      				</out>	
			</when>
			<otherwise>
	<out>
              <b pos="1"/>
              <chunk name="imp_enc">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
           </out>
	</otherwise>
	</choose>
      <out>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
      </out>
      <choose>
	      <when>
		      <test>
			      <equal>
				      <var n="treu_ref"/>
				      <lit v="treu"/>
			      </equal>
		      </test>
		      <out>
			      <b pos="1"/>
			      <chunk name="imp">
				      <tags>
					      <tag>
						      <lit-tag v="SV"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="a_verb"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="temps"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="pers"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="nbr"/>
					      </tag>
				      </tags>
				      <mlu>
					      <lu>
						      <clip pos="2" side="tl" part="lemh"/>
						      <clip pos="2" side="tl" part="a_verb"/>
						      <clip pos="2" side="tl" part="temps"/>
						      <clip pos="2" side="tl" part="pers"/>
						      <clip pos="2" side="tl" part="nbr"/>
						      <clip pos="2" side="tl" part="lemq"/>
					      </lu>
				      </mlu>
			      </chunk>
		      </out> 
	      </when>
	      <otherwise>
	    <out>
              <b pos="1"/>
              <chunk name="imp_enc">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
	</otherwise>
	</choose>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="adv imp prnenc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
                  <lu>
                    <clip pos="3" side="tl" part="whole"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="4" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="3"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="4" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <clip pos="4" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="imp prnenc prnenc">
      <pattern>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="imp_enc_enc" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SN"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <mlu>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_verb"/>
                <clip pos="1" side="tl" part="temps"/>
                <clip pos="1" side="tl" part="pers"/>
                <clip pos="1" side="tl" part="nbr"/>
              </lu>
<!--         gema           <lu>
						<clip pos="2" side="tl" part="lem"/> 
						<lit-tag v="prn.enc"/>
						<clip pos="2" side="tl" part="tipoenc_pro"/>
					</lu> -->
              <lu>
                <clip pos="3" side="tl" part="lem"/>
                <lit-tag v="prn.enc"/>
                <clip pos="3" side="tl" part="tipoenc_pro"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
            </mlu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv imp prnenc prnenc">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
<!--		gema		<lu>
							<clip pos="3" side="tl" part="lem"/> 
							<lit-tag v="prn.enc"/>
							<clip pos="3" side="tl" part="tipoenc_pro"/>
						</lu>-->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
<!--gema			<lu>
								<clip pos="3" side="tl" part="lem"/> 
								<lit-tag v="prn.enc"/>
								<clip pos="3" side="tl" part="tipoenc_pro"/>
							</lu>-->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <call-macro n="envia_pas">
              <with-param pos="1"/>
            </call-macro>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv imp prnenc prnenc adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="imp"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="f_imp_enc">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
<!-- gema		<lu>
									<clip pos="3" side="tl" part="lem"/> 
									<lit-tag v="prn.enc"/>
									<clip pos="3" side="tl" part="tipoenc_pro"/>
								</lu>-->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
              <b/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="imp_enc_enc">
                <tags>
                  <tag>
                    <lit-tag v="SN"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <mlu>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <clip pos="2" side="tl" part="pers"/>
                    <clip pos="2" side="tl" part="nbr"/>
                  </lu>
<!--	gema	<lu>
									<clip pos="3" side="tl" part="lem"/> 
									<lit-tag v="prn.enc"/>
									<clip pos="3" side="tl" part="tipoenc_pro"/>
								</lu>-->
                  <lu>
                    <clip pos="4" side="tl" part="lem"/>
                    <lit-tag v="prn.enc"/>
                    <clip pos="4" side="tl" part="tipoenc_pro"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </mlu>
              </chunk>
            </out>
            <choose>
              <when>
                <test>
                  <not>
                    <in caseless="yes">
                      <clip pos="5" side="tl" part="lem"/>
                      <list n="adv_neg"/>
                    </in>
                  </not>
                </test>
                <call-macro n="envia_pas">
                  <with-param pos="1"/>
                </call-macro>
              </when>
            </choose>
            <out>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="5" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="5" side="tl" part="lem"/>
                  <clip pos="5" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
        
    <rule comment="pp + verbpart + aux">
      <pattern>
        <pattern-item n="pp"/>
        <pattern-item n="verbpart"/>
        <pattern-item n="aux"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="numero"/>
                <lit-tag v="sp"/>
              </equal>
            </test>
            <let>
              <var n="numero"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>
        <let>
          <var n="lema_Vpart"/>
          <clip pos="2" side="sl" part="lem"/>
        </let>

        <out>
          <chunk namefrom="lema_Vpart" case="aa">
            <tags> 
              <tag><lit-tag v="Vpart"/></tag>
              <tag><clip pos="2" side="sl" part="a_part"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="haver_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_pp"/>
              <lit-tag v="m"/>
              <var n="numero"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
 
    <rule comment="aux + pp">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="numero"/>
                <lit-tag v="sp"/>
              </equal>
            </test>
            <let>
              <var n="numero"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>

        <out>
          <chunk name="haver_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <lit-tag v="m"/>
              <var n="numero"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
     
    <rule comment="pp + verbpart + aux + pp">
      <pattern>
        <pattern-item n="pp"/>
        <pattern-item n="verbpart"/>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="pih_prh_past_cip">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal>
                <var n="numero"/>
                <lit-tag v="sp"/>
              </equal>
            </test>
            <let>
              <var n="numero"/>
              <lit-tag v="sg"/>
            </let>
          </when>
        </choose>

        <out>
          <chunk name="haver_pp_pp" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag>
                <clip pos="4" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <lit-tag v="m"/>
              <var n="numero"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_pp"/>
              <lit-tag v="m"/>
              <var n="numero"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv aux + pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="haver_adv_pp">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="a_pp"/>
                  <lit-tag v="m.sg"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <lit-tag v="m.sg"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="haver_aux_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lemh"/>
                      <clip pos="3" side="tl" part="a_pp"/>
                      <lit-tag v="m.sg"/>
                      <clip pos="3" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="aux + pp adv">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="haver_aux_adv_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <clip pos="3" side="tl" part="a_adv"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <lit-tag v="m.sg"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="prnpro auxpers + pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="1"/>
		      <with-param pos="2"/>
		      <with-param pos="3"/>
	      </call-macro>
        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
	<when>
	<test>
	  <equal>
	    <clip pos="2" side="tl" part="lem"/>
	    <lit v="être"/>
	  </equal>
	</test>
	<let>
	   <clip pos="3" side="tl" part="nbr"/>
	   <clip pos="2" side="tl" part="nbr"/>
	  </let>
	</when>
	</choose>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="haver" case="caseFirstWord">
					<tags>
						<tag><lit-tag v="SV"/></tag>
						<tag><clip pos="2" side="tl" part="a_verb"/></tag>
						<tag><clip pos="2" side="tl" part="temps"/></tag>
						<tag><clip pos="2" side="tl" part="pers"/></tag>
						<tag><clip pos="2" side="tl" part="nbr"/></tag>
					</tags>
					<lu>
						<get-case-from pos="1">
							<clip pos="2" side="tl" part="lemh"/>
						</get-case-from>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
				</chunk>
				<b pos="1"/>
				<chunk name="adj">
					<tags>
						<tag><lit-tag v="SA"/></tag>
						<tag><var n="genero"/></tag>
						<tag><var n="numero"/></tag>
					</tags>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_adj"/>
						<clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
						<clip pos="3" side="tl" part="gen_mf"/>
						<clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
						<clip pos="3" side="tl" part="nbr_sp"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>  
			</out>
			<call-macro n="f_bcond">
				<with-param pos="2"/>
				<with-param pos="3"/>
			</call-macro>
 		</when>
		<otherwise>
			<out>
				<chunk name="pro_haver" case="caseFirstWord">
					<tags>
						<tag><lit-tag v="SV"/></tag>
						<tag><clip pos="2" side="tl" part="a_verb"/></tag>
						<tag><clip pos="2" side="tl" part="temps"/></tag>
						<tag><clip pos="2" side="tl" part="pers"/></tag>
						<tag><clip pos="2" side="tl" part="nbr"/></tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="whole"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="2" side="tl" part="lemh"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
				</chunk>
				<b pos="2"/>
				<chunk name="adj">
					<tags>
						<tag><lit-tag v="SA"/></tag>
						<tag><var n="genero"/></tag>
						<tag><var n="numero"/></tag>
					</tags>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_adj"/>
						<clip pos="3" side="tl" part="gen_sense_mf" link-to="2"/>
						<clip pos="3" side="tl" part="gen_mf"/>
						<clip pos="3" side="tl" part="nbr_sense_sp" link-to="3"/>
						<clip pos="3" side="tl" part="nbr_sp"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>  
			</out>
		</otherwise>
	</choose>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
	
	<let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv prnpro auxpers + pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="2"/>
		      <with-param pos="3"/>
		      <with-param pos="4"/>
	      </call-macro>
       <call-macro n="vauxiliar_pro">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
            </out>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
			    <out>
			
				<chunk name="haver_adv_pp">
					<tags>
						<tag>
						<lit-tag v="SV"/>
						</tag>
						<tag>
						<clip pos="4" side="tl" part="a_verb"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="temps"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="pers"/>
						</tag>
						<tag>
						<clip pos="3" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="pers"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
						</lu>
					<b pos="1"/>
					<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_adv"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="4" side="tl" part="lemh"/>
						<clip pos="4" side="tl" part="a_pp"/>
						<clip pos="4" side="tl" part="gen"/>
						<clip pos="4" side="tl" part="nbr"/>
						<clip pos="4" side="tl" part="lemq"/>
					</lu>
				</chunk>
				</out>
				<call-macro n="f_bcond">
					<with-param pos="3"/>
					<with-param pos="4"/>
				</call-macro>
 				
			</when>
			<otherwise>
				<out>
					<chunk name="pro_haver_adv_pp">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="4" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b pos="1"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="1" side="tl" part="lem"/>
							<clip pos="1" side="tl" part="a_adv"/>
						</lu>
						<b pos="3"/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_pp"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>

          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>
		
				<chunk name="haver_adv_pp">
				<tags>
				<tag>
					<lit-tag v="SV"/>
				</tag>
				<tag>
					<clip pos="4" side="tl" part="a_verb"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="temps"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="pers"/>
				</tag>
				<tag>
					<clip pos="3" side="tl" part="nbr"/>
				</tag>
				</tags>
				<lu>
				<clip pos="3" side="tl" part="lemh"/>
				<clip pos="3" side="tl" part="a_verb"/>
				<clip pos="3" side="tl" part="temps"/>
				<clip pos="3" side="tl" part="pers"/>
				<clip pos="3" side="tl" part="nbr"/>
				<clip pos="3" side="tl" part="lemq"/>
				</lu>
				<b pos="2"/>
				<lu>
				<lit v="pas"/>
				<lit-tag v="adv"/>
				</lu>
				<b pos="3"/>
				<lu>
				<clip pos="4" side="tl" part="lemh"/>
				<clip pos="4" side="tl" part="a_pp"/>
				<clip pos="4" side="tl" part="gen"/>
				<clip pos="4" side="tl" part="nbr"/>
				<clip pos="4" side="tl" part="lemq"/>
				</lu>
				</chunk>
				</out>
			</when>
			<otherwise>
				<out>
				
					<chunk name="pro_haver_adv_pp">
						<tags>
							<tag>
								<lit-tag v="SV"/>
							</tag>
							<tag>
								<clip pos="4" side="tl" part="a_verb"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="temps"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="pers"/>
							</tag>
							<tag>
								<clip pos="3" side="tl" part="nbr"/>
							</tag>
						</tags>
						<lu>
							<clip pos="2" side="tl" part="whole"/>
						</lu>
						<b pos="2"/>
						<lu>
							<clip pos="3" side="tl" part="lemh"/>
							<clip pos="3" side="tl" part="a_verb"/>
							<clip pos="3" side="tl" part="temps"/>
							<clip pos="3" side="tl" part="pers"/>
							<clip pos="3" side="tl" part="nbr"/>
							<clip pos="3" side="tl" part="lemq"/>
						</lu>
						<b pos="3"/>
						<lu>
							<lit v="pas"/>
							<lit-tag v="adv"/>
						</lu>
						<b/>
						<lu>
							<clip pos="4" side="tl" part="lemh"/>
							<clip pos="4" side="tl" part="a_pp"/>
							<clip pos="4" side="tl" part="gen"/>
							<clip pos="4" side="tl" part="nbr"/>
							<clip pos="4" side="tl" part="lemq"/>
						</lu>
					</chunk>
				</out>
			</otherwise>
		</choose>

              </when>
              <otherwise>
		      <choose>
			      <when>
				      <test>
					      <equal>
						      <var n="treu_ref"/>
						      <lit v="treu"/>
					      </equal>
				      </test>
					<out>
					<chunk name="pro_haver_adv_pp" case="caseFirstWord">
					<tags>
					<tag>
						<lit-tag v="SV"/>
					</tag>
					<tag>
						<clip pos="4" side="tl" part="a_verb"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="temps"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="pers"/>
					</tag>
					<tag>
						<clip pos="3" side="tl" part="nbr"/>
					</tag>
					</tags>
					<lu>
					<clip pos="2" side="tl" part="whole"/>
					</lu>
					<b pos="1"/>
					<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_verb"/>
					<clip pos="3" side="tl" part="temps"/>
					<clip pos="3" side="tl" part="pers"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
					</lu>
					<b pos="2"/>
					<lu>
					<clip pos="1" side="tl" part="lem"/>
					<clip pos="1" side="tl" part="a_adv"/>
					</lu>
					<b pos="3"/>
					<lu>
					<clip pos="4" side="tl" part="lemh"/>
					<clip pos="4" side="tl" part="a_pp"/>
					<clip pos="4" side="tl" part="gen"/>
					<clip pos="4" side="tl" part="nbr"/>
					<clip pos="4" side="tl" part="lemq"/>
					</lu>
					</chunk>
					</out>
				</when>
				<otherwise>
					<out>
						<chunk name="pro_haver_adv_pp" case="caseFirstWord">
							<tags>
								<tag>
									<lit-tag v="SV"/>
								</tag>
								<tag>
									<clip pos="4" side="tl" part="a_verb"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="temps"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="pers"/>
								</tag>
								<tag>
									<clip pos="3" side="tl" part="nbr"/>
								</tag>
							</tags>
							<lu>
								<clip pos="2" side="tl" part="whole"/>
							</lu>
							<b pos="1"/>
							<lu>
								<clip pos="3" side="tl" part="lemh"/>
								<clip pos="3" side="tl" part="a_verb"/>
								<clip pos="3" side="tl" part="temps"/>
								<clip pos="3" side="tl" part="pers"/>
								<clip pos="3" side="tl" part="nbr"/>
								<clip pos="3" side="tl" part="lemq"/>
							</lu>
							<b pos="2"/>
							<lu>
								<clip pos="1" side="tl" part="lem"/>
								<clip pos="1" side="tl" part="a_adv"/>
							</lu>
							<b pos="3"/>
							<lu>
								<clip pos="4" side="tl" part="lemh"/>
								<clip pos="4" side="tl" part="a_pp"/>
								<clip pos="4" side="tl" part="gen"/>
								<clip pos="4" side="tl" part="nbr"/>
								<clip pos="4" side="tl" part="lemq"/>
							</lu>
						</chunk>
					</out>
				</otherwise>
			</choose>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="prnpro auxpers + pp adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="1"/>
		      <with-param pos="2"/>
		      <with-param pos="3"/>
	      </call-macro>
        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="haver_adv_pp" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<get-case-from pos="1">
							<clip pos="2" side="tl" part="lemh"/>
						</get-case-from>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="4" side="tl" part="lem"/>
						<clip pos="4" side="tl" part="a_adv"/>
					</lu>
					<b pos="2"/>
					<lu>
					<clip pos="3" side="tl" part="lemh"/>
					<clip pos="3" side="tl" part="a_pp"/>
					<clip pos="3" side="tl" part="gen"/>
					<clip pos="3" side="tl" part="nbr"/>
					<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
			<call-macro n="f_bcond">
				<with-param pos="3"/>
				<with-param pos="4"/>
			</call-macro>
 		</when>
		<otherwise>
			<out>
				<chunk name="pro_haver_adv_pp" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="whole"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="2" side="tl" part="lemh"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
						<clip pos="2" side="tl" part="lemq"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="4" side="tl" part="lem"/>
						<clip pos="4" side="tl" part="a_adv"/>
					</lu>
					<b pos="3"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_pp"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</otherwise>
	</choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_haver_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv prnpro prnpro auxpers pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro">
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_pro_haver_pp">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="5" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="whole"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_verb"/>
                  <clip pos="4" side="tl" part="temps"/>
                  <clip pos="4" side="tl" part="pers"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_pro_haver_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_pro_haver_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="whole"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="3" side="tl" part="whole"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_verb"/>
                      <clip pos="4" side="tl" part="temps"/>
                      <clip pos="4" side="tl" part="pers"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="prnpro prnpro auxpers pp adv">
      <pattern>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="auxpers"/>
        <pattern-item n="pp"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar_pro">
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_pro_haver_adv_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_verb"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <clip pos="5" side="tl" part="a_adv"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="auxinf-enc pp">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="2"/>
		      <with-param pos="1"/>
		      <with-param pos="3"/>
	      </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="auxinf_pp" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<lit-tag v="sg"/>
						</tag>
						<!--com a sn és sg ("cantar és important") -->
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lemh"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
						<clip pos="1" side="tl" part="lemq"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="3" side="tl" part="lemh"/>
						<clip pos="3" side="tl" part="a_pp"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
						<clip pos="3" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
		</when>
		<otherwise>
        
			
			<out>
          <chunk name="pro_auxinf_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="3" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
<!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_pp"/>
              <clip pos="3" side="tl" part="gen"/>
              <clip pos="3" side="tl" part="nbr"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
		</otherwise>
	</choose>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
       <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv auxinf-enc pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="3"/>
		      <with-param pos="2"/>
		      <with-param pos="4"/>
	      </call-macro>
         <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
      </out>
      <choose>
	      <when>
		      <test>
			      <equal>
				      <var n="treu_ref"/>
				      <lit v="treu"/>
			      </equal>
		      </test>
		      <out>
			      <chunk name="auxinf_adv_pp">
				      <tags>
					      <tag>
						      <lit-tag v="SV"/>
					      </tag>
					      <tag>
						      <clip pos="4" side="tl" part="a_verb"/>
					      </tag>
					      <tag>
						      <clip pos="2" side="tl" part="temps"/>
					      </tag>
					      <tag>
						      <lit-tag v="sg"/>
					      </tag>
					      <!--com a sn és sg ("cantar és important") -->
				      </tags>
				      <lu>
					      <clip pos="2" side="tl" part="lemh"/>
					      <clip pos="2" side="tl" part="a_verb"/>
					      <clip pos="2" side="tl" part="temps"/>
					      <clip pos="2" side="tl" part="pers"/>
					      <clip pos="2" side="tl" part="nbr"/>
					      <clip pos="2" side="tl" part="lemq"/>
				      </lu>
				      <b pos="2"/>
				      <lu>
					      <clip pos="1" side="tl" part="lem"/>
					      <clip pos="1" side="tl" part="a_adv"/>
				      </lu>
				      <b/>
				      <lu>
					      <clip pos="4" side="tl" part="lemh"/>
					      <clip pos="4" side="tl" part="a_pp"/>
					      <clip pos="4" side="tl" part="gen"/>
					      <clip pos="4" side="tl" part="nbr"/>
					      <clip pos="4" side="tl" part="lemq"/>
				      </lu>
			      </chunk>
           		 </out>		      
		 </when>
		 <otherwise>
      <out>
              <chunk name="pro_auxinf_adv_pp">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="4" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lemh"/>
                  <clip pos="4" side="tl" part="a_pp"/>
                  <clip pos="4" side="tl" part="gen"/>
                  <clip pos="4" side="tl" part="nbr"/>
                  <clip pos="4" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
   	 </otherwise>
	</choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>
				  <chunk name="auxinf_adv_pp">
					  <tags>
						  <tag>
							  <lit-tag v="SV"/>
						  </tag>
						  <tag>
							  <clip pos="4" side="tl" part="a_verb"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="temps"/>
						  </tag>
						  <tag>
							  <lit-tag v="sg"/>
						  </tag>
						  <!--com a sn és sg ("cantar és important") -->
					  </tags>
					  <lu>
						  <clip pos="2" side="tl" part="lemh"/>
						  <clip pos="2" side="tl" part="a_verb"/>
						  <clip pos="2" side="tl" part="temps"/>
						  <clip pos="2" side="tl" part="pers"/>
						  <clip pos="2" side="tl" part="nbr"/>
						  <clip pos="2" side="tl" part="lemq"/>
					  </lu>
					  <b pos="2"/>
					  <lu>
						  <lit v="pas"/>
						  <lit-tag v="adv"/>
					  </lu>
					  <b/>
					  <lu>
						  <clip pos="4" side="tl" part="lemh"/>
						  <clip pos="4" side="tl" part="a_pp"/>
						  <clip pos="4" side="tl" part="gen"/>
						  <clip pos="4" side="tl" part="nbr"/>
						  <clip pos="4" side="tl" part="lemq"/>
					  </lu>
				  </chunk>
			  </out>
		  </when>
		  <otherwise>
	  
	  <out>
                  <chunk name="pro_auxinf_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
<!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
			</otherwise>
		</choose>
              </when>
              <otherwise>
		      <choose>
			      <when>
				      <test>
					      <equal>
						      <var n="treu_ref"/>
						      <lit v="treu"/>
					      </equal>
				      </test>
				      <out>
					      <chunk name="auxinf_pp" case="caseFirstWord">
						      <tags>
							      <tag>
								      <lit-tag v="SV"/>
							      </tag>
							      <tag>
								      <clip pos="4" side="tl" part="a_verb"/>
							      </tag>
							      <tag>
								      <clip pos="2" side="tl" part="temps"/>
							      </tag>
							      <tag>
								      <lit-tag v="sg"/>
							      </tag>
							      <!--com a sn és sg ("cantar és important") -->
						      </tags>
						      <lu>
							      <clip pos="2" side="tl" part="lemh"/>
							      <clip pos="2" side="tl" part="a_verb"/>
							      <clip pos="2" side="tl" part="temps"/>
							      <clip pos="2" side="tl" part="pers"/>
							      <clip pos="2" side="tl" part="nbr"/>
							      <clip pos="2" side="tl" part="lemq"/>
						      </lu>
						      <b pos="1"/>
						      <lu>
							      <clip pos="1" side="tl" part="lem"/>
							      <clip pos="1" side="tl" part="a_adv"/>
						      </lu>
						      <b pos="2"/>
						      <lu>
							      <clip pos="4" side="tl" part="lemh"/>
							      <clip pos="4" side="tl" part="a_pp"/>
							      <clip pos="4" side="tl" part="gen"/>
							      <clip pos="4" side="tl" part="nbr"/>
							      <clip pos="4" side="tl" part="lemq"/>
						      </lu>
					      </chunk>
					</out>		      
				</when>
				<otherwise>
                <out>
                  <chunk name="pro_auxinf_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="4" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
<!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="4" side="tl" part="lemh"/>
                      <clip pos="4" side="tl" part="a_pp"/>
                      <clip pos="4" side="tl" part="gen"/>
                      <clip pos="4" side="tl" part="nbr"/>
                      <clip pos="4" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
	</otherwise>
</choose>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="auxinf-enc-enc pp">
      <pattern>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pro_auxinf_pp" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="4" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <lit-tag v="sg"/>
              </tag>
<!--com a sn és sg ("cantar és important") -->
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="2" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="3" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_pp"/>
              <clip pos="4" side="tl" part="gen"/>
              <clip pos="4" side="tl" part="nbr"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="adv auxinf-enc-enc pp">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="auxinf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="f_concord_prn_pp">
          <with-param pos="4"/>
          <with-param pos="5"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="1" side="tl" part="lem"/>
                <list n="adv_neg"/>
              </in>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <lit v="ne"/>
                  <lit-tag v="adv"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="pro_auxinf_adv_pp">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="5" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <lit-tag v="sg"/>
                  </tag>
<!--com a sn és sg ("cantar és important") -->
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="3" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="4" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="4" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_pp"/>
                  <clip pos="5" side="tl" part="gen"/>
                  <clip pos="5" side="tl" part="nbr"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <equal caseless="yes">
                    <clip pos="1" side="sl" part="lem"/>
                    <lit v="no"/>
                  </equal>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="pro_auxinf_adv_pp">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
<!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </when>
              <otherwise>
                <out>
                  <chunk name="pro_auxinf_adv_pp" case="caseFirstWord">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="5" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <lit-tag v="sg"/>
                      </tag>
<!--com a sn és sg ("cantar és important") -->
                    </tags>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="3" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="4" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="4" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b/>
                    <lu>
                      <clip pos="2" side="tl" part="lemh"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                      <clip pos="2" side="tl" part="lemq"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_pp"/>
                      <clip pos="5" side="tl" part="gen"/>
                      <clip pos="5" side="tl" part="nbr"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="aux + irpp a inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aux_irpp_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_pp"/>
              <lit-tag v="m.sg"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: aux ir a inf enc -&gt; aux aller pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="5"/>
		      <with-param pos="1"/>
		      <with-param pos="4"/>
	      </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="aux_irpp_inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="gen"/>
						<clip pos="2" side="tl" part="nbr"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="4" side="tl" part="lemh"/>
						<clip pos="4" side="tl" part="a_verb"/>
						<clip pos="4" side="tl" part="temps"/>
						<clip pos="4" side="tl" part="lemq"/>
					</lu>
				</chunk>
			</out>
			<call-macro n="f_bcond">
				<with-param pos="3"/>
				<with-param pos="4"/>
			</call-macro>
		</when>
		<otherwise>
        <out>
          <chunk name="aux_irpp_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
		</otherwise>
	</choose>
	<let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="REGLA: aux ir a inf enc enc -&gt; aux aller pro pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="aux_irpp_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="6" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: aux adv ir a inf -&gt; aller adv inf">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aux_adv_irpp_verb">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_adv_irpp_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="4"/>
	  <with-param pos="5"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: aux irpp a inf adv-&gt; aux aller adv inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aux_irpp_adv_verb" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="5" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv aux irpp a inf adv-&gt; aux aller adv inf adv">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="6" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_irpp_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="6" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
                <call-macro n="f_bcond">
                  <with-param pos="5"/>
                  <with-param pos="6"/>
                </call-macro>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
                  <chunk name="aux_adv_irpp_verb">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                  <b pos="5"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="6" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <clip pos="6" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_adv_irpp_verb" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="4"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="6" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <clip pos="6" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv aux irpp a inf enc -&gt; aux aller adv pro inf">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="aux"/>
        <pattern-item n="ir"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="6"/>
		      <with-param pos="2"/>
		      <with-param pos="5"/>
	      </call-macro>
         <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
      	     </out>
	     <choose>
		     <when>
			     <test>
				     <equal>
					     <var n="treu_ref"/>
					     <lit v="treu"/>
				     </equal>
			     </test>
			     <out>
				     <chunk name="aux_irpp_adv_inf">
					     <tags>
						     <tag>
							     <lit-tag v="SV"/>
						     </tag>
						     <tag>
							     <clip pos="3" side="tl" part="a_verb"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="temps"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="pers"/>
						     </tag>
						     <tag>
							     <clip pos="2" side="tl" part="nbr"/>
						     </tag>
					     </tags>
					     <lu>
						     <clip pos="2" side="tl" part="lem"/>
						     <clip pos="2" side="tl" part="a_verb"/>
						     <clip pos="2" side="tl" part="temps"/>
						     <clip pos="2" side="tl" part="pers"/>
						     <clip pos="2" side="tl" part="nbr"/>
					     </lu>
					     <b pos="1"/>
					     <lu>
						     <lit v="pas"/>
						     <lit-tag v="adv"/>
					     </lu>
					     <b pos="2"/>
					     <lu>
						     <clip pos="3" side="tl" part="lem"/>
						     <clip pos="3" side="tl" part="a_verb"/>
						     <clip pos="3" side="tl" part="temps"/>
						     <clip pos="3" side="tl" part="gen"/>
						     <clip pos="3" side="tl" part="nbr"/>
					     </lu>
					     <b pos="3"/>
					     <lu>
						     <clip pos="5" side="tl" part="lemh"/>
						     <clip pos="5" side="tl" part="a_verb"/>
						     <clip pos="5" side="tl" part="temps"/>
						     <clip pos="5" side="tl" part="lemq"/>
					     </lu>
				     </chunk>
			     </out>
			     <call-macro n="f_bcond">
				     <with-param pos="4"/>
				     <with-param pos="5"/>
			     </call-macro>
		     </when>
		     <otherwise>
	     
	     <out>
              <chunk name="aux_irpp_adv_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
		</otherwise>
	</choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			    </test>
			    <out>
				    <chunk name="aux_irpp_adv_inf" case="caseFirstWord">
					    <tags>
						    <tag>
							    <lit-tag v="SV"/>
						    </tag>
						    <tag>
							    <clip pos="3" side="tl" part="a_verb"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="temps"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="pers"/>
						    </tag>
						    <tag>
							    <clip pos="2" side="tl" part="nbr"/>
						    </tag>
					    </tags>
					    <lu>
						    <clip pos="2" side="tl" part="lem"/>
						    <clip pos="2" side="tl" part="a_verb"/>
						    <clip pos="2" side="tl" part="temps"/>
						    <clip pos="2" side="tl" part="pers"/>
						    <clip pos="2" side="tl" part="nbr"/>
					    </lu>
					    <b pos="1"/>
					    <lu>
						    <get-case-from pos="2">
							    <clip pos="1" side="tl" part="lem"/>
						    </get-case-from>
						    <clip pos="1" side="tl" part="a_adv"/>
					    </lu>
					    <b pos="2"/>
					    <lu>
						    <clip pos="3" side="tl" part="lem"/>
						    <clip pos="3" side="tl" part="a_verb"/>
						    <clip pos="3" side="tl" part="temps"/>
						    <clip pos="3" side="tl" part="gen"/>
						    <clip pos="3" side="tl" part="nbr"/>
					    </lu>
					    <b pos="3"/>
					    <lu>
						    <clip pos="5" side="tl" part="lemh"/>
						    <clip pos="5" side="tl" part="a_verb"/>
						    <clip pos="5" side="tl" part="temps"/>
						    <clip pos="5" side="tl" part="lemq"/>
					    </lu>
				    </chunk>
			    </out>
			    <call-macro n="f_bcond">
				    <with-param pos="4"/>
				    <with-param pos="5"/>
			    </call-macro>
		    </when>
		    <otherwise>
	    
	    
            <out>
              <chunk name="aux_irpp_adv_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
    </otherwise>
</choose>
          </otherwise>
        </choose>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv aux irpp a inf enc adv-&gt; aux aller adv pro inf adv">
      <pattern>
        <pattern-item n="adv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="6"/>
		      <with-param pos="2"/>
		      <with-param pos="5"/>
	      </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="7" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b pos="1"/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>
				  <chunk name="aux_irpp_adv_inf">
					  <tags>
						  <tag>
							  <lit-tag v="SV"/>
						  </tag>
						  <tag>
							  <clip pos="3" side="tl" part="a_verb"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="temps"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="pers"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="nbr"/>
						  </tag>
					  </tags>
					  <lu>
						  <clip pos="2" side="tl" part="lem"/>
						  <clip pos="2" side="tl" part="a_verb"/>
						  <clip pos="2" side="tl" part="temps"/>
						  <clip pos="2" side="tl" part="pers"/>
						  <clip pos="2" side="tl" part="nbr"/>
					  </lu>
					  <b pos="2"/>
					  <lu>
						  <clip pos="7" side="tl" part="whole"/>
					  </lu>
					  <b pos="3"/>
					  <lu>
						  <clip pos="3" side="tl" part="lem"/>
						  <clip pos="3" side="tl" part="a_verb"/>
						  <clip pos="3" side="tl" part="temps"/>
						  <clip pos="3" side="tl" part="gen"/>
						  <clip pos="3" side="tl" part="nbr"/>
					  </lu>
					  <b pos="4"/>
					  <lu>
						  <clip pos="5" side="tl" part="lemh"/>
						  <clip pos="5" side="tl" part="a_verb"/>
						  <clip pos="5" side="tl" part="temps"/>
						  <clip pos="5" side="tl" part="lemq"/>
					  </lu>
				  </chunk>
                </out>
		<call-macro n="f_bcond">
			<with-param pos="5"/>
			<with-param pos="6"/>
		</call-macro>
	</when>
	<otherwise>
	  <out>
                  <chunk name="aux_irpp_adv_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="7" side="tl" part="whole"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="6"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
                </out>
	</otherwise>
</choose>
              </when>
              <otherwise>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="1" side="tl" part="lem"/>
                      <clip pos="1" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                  <b/>
	  </out>
	  <choose>
		  <when>
			  <test>
				  <equal>
					  <var n="treu_ref"/>
					  <lit v="treu"/>
				  </equal>
			  </test>
			  <out>
				  <chunk name="aller_adv_inf">
					  <tags>
						  <tag>
							  <lit-tag v="SV"/>
						  </tag>
						  <tag>
							  <clip pos="3" side="tl" part="a_verb"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="temps"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="pers"/>
						  </tag>
						  <tag>
							  <clip pos="2" side="tl" part="nbr"/>
						  </tag>
					  </tags>
					  <lu>
						  <clip pos="2" side="tl" part="lem"/>
						  <clip pos="2" side="tl" part="a_verb"/>
						  <clip pos="2" side="tl" part="temps"/>
						  <clip pos="2" side="tl" part="pers"/>
						  <clip pos="2" side="tl" part="nbr"/>
					  </lu>
					  <b pos="1"/>
					  <lu>
						  <lit v="pas"/>
						  <lit-tag v="adv"/>
					  </lu>
					  <b pos="2"/>
					  <lu>
						  <clip pos="3" side="tl" part="lem"/>
						  <clip pos="3" side="tl" part="a_verb"/>
						  <clip pos="3" side="tl" part="temps"/>
						  <clip pos="3" side="tl" part="gen"/>
						  <clip pos="3" side="tl" part="nbr"/>
					  </lu>
					  <b pos="3"/>
					  <lu>
						  <clip pos="5" side="tl" part="lemh"/>
						  <clip pos="5" side="tl" part="a_verb"/>
						  <clip pos="5" side="tl" part="temps"/>
						  <clip pos="5" side="tl" part="lemq"/>
					  </lu>
				  </chunk>
	  		</out>	  
			<call-macro n="f_bcond">
				<with-param pos="4"/>
				<with-param pos="5"/>
			</call-macro>
		</when>
		<otherwise>
	  <out>
                  <chunk name="aller_adv_pro_inf">
                    <tags>
                      <tag>
                        <lit-tag v="SV"/>
                      </tag>
                      <tag>
                        <clip pos="3" side="tl" part="a_verb"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="temps"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="pers"/>
                      </tag>
                      <tag>
                        <clip pos="2" side="tl" part="nbr"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="2" side="tl" part="lem"/>
                      <clip pos="2" side="tl" part="a_verb"/>
                      <clip pos="2" side="tl" part="temps"/>
                      <clip pos="2" side="tl" part="pers"/>
                      <clip pos="2" side="tl" part="nbr"/>
                    </lu>
                    <b pos="1"/>
                    <lu>
                      <lit v="pas"/>
                      <lit-tag v="adv"/>
                    </lu>
                    <b pos="2"/>
                    <lu>
                      <clip pos="3" side="tl" part="lem"/>
                      <clip pos="3" side="tl" part="a_verb"/>
                      <clip pos="3" side="tl" part="temps"/>
                      <clip pos="3" side="tl" part="gen"/>
                      <clip pos="3" side="tl" part="nbr"/>
                    </lu>
                    <b pos="3"/>
                    <lu>
                      <clip pos="6" side="tl" part="lem"/>
                      <lit-tag v="prn.pro"/>
                      <clip pos="6" side="tl" part="tipoenc_pro"/>
                    </lu>
                    <b pos="4"/>
                    <lu>
                      <clip pos="5" side="tl" part="lemh"/>
                      <clip pos="5" side="tl" part="a_verb"/>
                      <clip pos="5" side="tl" part="temps"/>
                      <clip pos="5" side="tl" part="lemq"/>
                    </lu>
                  </chunk>
	  </out>
  </otherwise>
</choose>
	  <out>
                  <b pos="6"/>
                  <chunk name="adv">
                    <tags>
                      <tag>
                        <clip pos="7" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <clip pos="7" side="tl" part="lem"/>
                      <clip pos="7" side="tl" part="a_adv"/>
                    </lu>
                  </chunk>
                </out>
              </otherwise>
            </choose>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
	    <choose>
		    <when>
			    <test>
				    <equal>
					    <var n="treu_ref"/>
					    <lit v="treu"/>
				    </equal>
			</test>	    
			<out>
				<chunk name="aller_adv_inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="3" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="pers"/>
						<clip pos="2" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<get-case-from pos="2">
							<clip pos="1" side="tl" part="lem"/>
						</get-case-from>
						<clip pos="1" side="tl" part="a_adv"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="3" side="tl" part="lem"/>
						<clip pos="3" side="tl" part="a_verb"/>
						<clip pos="3" side="tl" part="temps"/>
						<clip pos="3" side="tl" part="gen"/>
						<clip pos="3" side="tl" part="nbr"/>
					</lu>
					<b pos="3"/>
					<lu>
						<clip pos="5" side="tl" part="lemh"/>
						<clip pos="5" side="tl" part="a_verb"/>
						<clip pos="5" side="tl" part="temps"/>
						<clip pos="5" side="tl" part="lemq"/>
					</lu>
				</chunk>
        		</out>
			<call-macro n="f_bcond">
				<with-param pos="4"/>
				<with-param pos="5"/>
			</call-macro>
		</when>
		<otherwise>
            <out>
              <chunk name="aller_adv_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <out>
              <b pos="6"/>
              <chunk name="adv">
                <tags>
                  <tag>
                    <clip pos="7" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <clip pos="7" side="tl" part="a_adv"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
         <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: aux ir a inf enc adv -&gt; aux aller adv pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
	      <call-macro n="control_ref_aux">
		      <with-param pos="5"/>
		      <with-param pos="1"/>
		      <with-param pos="4"/>
	      </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
	<choose>
		<when>
			<test>
				<equal>
					<var n="treu_ref"/>
					<lit v="treu"/>
				</equal>
			</test>
			<out>
				<chunk name="aux_adv_irpp_inf" case="caseFirstWord">
					<tags>
						<tag>
							<lit-tag v="SV"/>
						</tag>
						<tag>
							<clip pos="2" side="tl" part="a_verb"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="temps"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="pers"/>
						</tag>
						<tag>
							<clip pos="1" side="tl" part="nbr"/>
						</tag>
					</tags>
					<lu>
						<clip pos="1" side="tl" part="lem"/>
						<clip pos="1" side="tl" part="a_verb"/>
						<clip pos="1" side="tl" part="temps"/>
						<clip pos="1" side="tl" part="pers"/>
						<clip pos="1" side="tl" part="nbr"/>
					</lu>
					<b pos="1"/>
					<lu>
						<clip pos="6" side="tl" part="whole"/>
					</lu>
					<b pos="2"/>
					<lu>
						<clip pos="2" side="tl" part="lem"/>
						<clip pos="2" side="tl" part="a_verb"/>
						<clip pos="2" side="tl" part="temps"/>
						<clip pos="2" side="tl" part="gen"/>
						<clip pos="2" side="tl" part="nbr"/>
					</lu>
					<b pos="3"/>
					<lu>
						<clip pos="4" side="tl" part="lemh"/>
						<clip pos="4" side="tl" part="a_verb"/>
						<clip pos="4" side="tl" part="temps"/>
						<clip pos="4" side="tl" part="lemq"/>
					</lu>
				</chunk>
        		</out>
			<call-macro n="f_bcond">
				<with-param pos="4"/>
				<with-param pos="5"/>
			</call-macro>
		</when>
		<otherwise>
        <out>
          <chunk name="aux_adv_irpp_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="6" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
		</otherwise>
	</choose>
        <call-macro n="f_bcond">
          <with-param pos="5"/>
	  <with-param pos="6"/>
        </call-macro>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
	<let>
		<var n="treu_ref"/>
		<lit v=""/>
	</let>
      </action>
   </rule>
    
    <rule comment="REGLA: adv aux irpp a inf enc enc-&gt; aux aller adv pro pro inf">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
      </pattern>
      <action>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="vauxiliar">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <equal caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <lit v="no"/>
              </equal>
            </test>
            <out>
              <chunk name="adv" case="caseFirstWord">
                <tags>
                  <tag>
                    <clip pos="1" side="tl" part="a_adv"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lem"/>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
              </chunk>
              <b/>
              <chunk name="aux_irpp_adv_pro_pro_inf">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="pas"/>
                  <lit-tag v="adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="7" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <choose>
              <when>
                <test>
                  <in caseless="yes">
                    <clip pos="1" side="tl" part="lem"/>
                    <list n="adv_neg"/>
                  </in>
                </test>
                <out>
                  <chunk name="adv" case="caseFirstWord">
                    <tags>
                      <tag>
                        <clip pos="1" side="tl" part="a_adv"/>
                      </tag>
                    </tags>
                    <lu>
                      <get-case-from pos="1">
                        <lit v="ne"/>
                      </get-case-from>
                      <lit-tag v="adv"/>
                    </lu>
                  </chunk>
                  <b/>
                </out>
                <let>
                  <var n="caseFirstWord"/>
                  <lit v="aa"/>
                </let>
              </when>
            </choose>
            <out>
              <chunk name="aux_irpp_adv_pro_pro_inf" case="caseFirstWord">
                <tags>
                  <tag>
                    <lit-tag v="SV"/>
                  </tag>
                  <tag>
                    <clip pos="3" side="tl" part="a_verb"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="temps"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="pers"/>
                  </tag>
                  <tag>
                    <clip pos="2" side="tl" part="nbr"/>
                  </tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lem"/>
                  <clip pos="2" side="tl" part="a_verb"/>
                  <clip pos="2" side="tl" part="temps"/>
                  <clip pos="2" side="tl" part="pers"/>
                  <clip pos="2" side="tl" part="nbr"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <get-case-from pos="2">
                    <clip pos="1" side="tl" part="lem"/>
                  </get-case-from>
                  <clip pos="1" side="tl" part="a_adv"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lem"/>
                  <clip pos="3" side="tl" part="a_verb"/>
                  <clip pos="3" side="tl" part="temps"/>
                  <clip pos="3" side="tl" part="gen"/>
                  <clip pos="3" side="tl" part="nbr"/>
                </lu>
                <b pos="3"/>
                <lu>
                  <clip pos="6" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="6" side="tl" part="tipoenc_pro"/>
                </lu>
                <b pos="4"/>
                <lu>
                  <clip pos="7" side="tl" part="lem"/>
                  <lit-tag v="prn.pro"/>
                  <clip pos="7" side="tl" part="tipoenc_pro"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="5" side="tl" part="lemh"/>
                  <clip pos="5" side="tl" part="a_verb"/>
                  <clip pos="5" side="tl" part="temps"/>
                  <clip pos="5" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
    
    <rule comment="REGLA: aux irpp a inf enc enc adv-&gt; aux aller adv pro pro inf">
      <pattern>
        <pattern-item n="aux"/>
        <pattern-item n="irpp"/>
        <pattern-item n="a"/>
        <pattern-item n="inf"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="prnenc"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <call-macro n="vauxiliar">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="firstWord">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="aux_irpp_adv_pro_pro_inf" case="caseFirstWord">
            <tags>
              <tag>
                <lit-tag v="SV"/>
              </tag>
              <tag>
                <clip pos="2" side="tl" part="a_verb"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="temps"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="pers"/>
              </tag>
              <tag>
                <clip pos="1" side="tl" part="nbr"/>
              </tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lem"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <clip pos="1" side="tl" part="pers"/>
              <clip pos="1" side="tl" part="nbr"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lem"/>
              <clip pos="2" side="tl" part="a_verb"/>
              <clip pos="2" side="tl" part="temps"/>
              <clip pos="2" side="tl" part="gen"/>
              <clip pos="2" side="tl" part="nbr"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="7" side="tl" part="whole"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="5" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="5" side="tl" part="tipoenc_pro"/>
            </lu>
            <b pos="6"/>
            <lu>
              <clip pos="6" side="tl" part="lem"/>
              <lit-tag v="prn.pro"/>
              <clip pos="6" side="tl" part="tipoenc_pro"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="a_verb"/>
              <clip pos="4" side="tl" part="temps"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <let>
          <var n="caseFirstWord"/>
          <lit v="aa"/>
        </let>
      </action>
   </rule>
       
<!--************************************ ALTRES ************************************************ -->
